---
title: "Exploration Relation Col&Mon"
author: "Olivier"
date: "17 octobre 2019"
output: 
    bookdown::html_document2:
        theme: readable
        toc: true
        toc_float: true
        number_sections: true
        fig_caption: yes
        code_folding: hide
    
---

```{r setup, include = FALSE}
library(dplyr) # manip données
```


# Statistiques descriptives des données

## Chargement des données

Les données sont regroupées en deux tableaux :

* "T0impl.Rds" contenant les implantations,
* "T0New.Rds" contenant les faits.

C'est du second que l'on tire les relations.

```{r 1.1 chargement}
implantation.dat <- readRDS("data/T0impl.Rds")
fait.dat <- readRDS("data/T0New.Rds")
# une exraction des relations
relation.dat <- fait.dat[fait.dat$caracNew == "Relations" ,]
```

Il faut specifier les encoding de 3 colonnes qui sont en "Latin1" alors que le reste semble être en UTF8

```{r bon encoding}
# l'encoding semble en UTF8 et latin1 en fonction des colonnes/sources de la données
# la fonction Encoding permet de le specifier
Encoding(fait.dat$usual_name) <- "latin1"
Encoding(fait.dat$caracteristique) <- "latin1"
Encoding(fait.dat$linked_implantation_name) <- "latin1"
```

## Description des relations

### Modalité des relations

On obtient `r nrow(relation.dat)` factoides avec une `relation`. Le tableau \@ref(tab:modalite) répartit `modalite` en fonction des `modAgreg`. `H` de `modAgreg` ne correspond qu'aux associations de prière (`r nrow(relation.dat[relation.dat$modalite == "Association de prière",])`)) et `X` ne correspond qu'aux déplacements d'institution (`r nrow(relation.dat[relation.dat$modalite == "Déplacement d'institution",])`). `A` et `D` correspondent aux relations ascendantes et descendantes comprises entre trois couples : 

* `À la collation de / Droit de patronage`, 
* `Appartient / à Possède` et 
* `Filiation ascendante directe / Filiation descendante`.

(ref:modalite-caption) Ventilation de modAgreg en fonction de modalite

```{r, modalite}
knitr::kable(t(table(relation.dat$modAgreg, relation.dat$modalite)),
             caption = "(ref:modalite-caption)")
```

### Modalité dans le temps




# Premiers graphes sur les relations